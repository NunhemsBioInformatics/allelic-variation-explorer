<!DOCTYPE html>
<html>
  <head>
    <title>Dot Plot</title>
    <script type="text/javascript" src="./lib/d3.js"></script>
    <script type="text/javascript" src="./lib/d3.behavior.js"></script>
    <style type="text/css">
    </style>
  </head>
  <body>
    <script type="text/javascript">

    var dim = {w: 710, h: 500};
    var padding = [4,4,20,40];
    var stroke = function(d) { return d ? "#ccc" : "#666"; };

    var tx = function(d) { return "translate(" + x(d) + ", 0)";};
    var ty = function(d) { return "translate(0, " + y(d) + ")";};
    var x = d3.scale.linear().domain([1, 10000]).range([0, dim.w]);
    var y = d3.scale.linear().domain([1, 10000]).range([0, dim.y]);

    var svg = d3.select("body")
        .append("svg:svg")
            .attr("width", dim.w + padding[1] + padding[3])
            .attr("heeight", dim.h + padding[0] + padding[2])
            .attr("pointer-events", "all")
            .call(d3.behavior.zoom()
            .on("zoom", redraw))
        .append("svg.g")
            .attr("transform", "translate(" + padding[3] + "," + padding[0] + ")");

    svg.append("svg:rect")
        .attr("width", dim.w)
        .attr("height", dim.h)
        .attr("stroke", stroke)
        .attr("fill", "none");

    redraw();

    function redraw(){
        if (d3.event) d3.event.transform(x,y);

        var fy = y.tickFormat(10);

        var gy = svg.selectAll("g.y")
            .data(y.ticks(10), String)
            .attr("transform", ty);
        gy.select("text")
            .text(fy);

        var gye = gy.enter().insert("svg:g", "rect")
            .attr("class", "y")
            .attr("transform", ty);

        gye.append("svg:line")
            .attr("stroke", stroke)
            .attr("y1", 0)
            .attr("y2", dim.h);
        gye.append("svg:text")
            .attr("y", dim.h)
            .attr("dy", "1em")
            .attr("text-anchor", "middle")
            .text(fy);
    gy.exit().remove();

    }

    </script>
  </body>
</html>

